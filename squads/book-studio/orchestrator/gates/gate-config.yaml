# Gate Config â€” Quality Gates System
version: "1.0.0"
description: "Configuracao dos quality gates do pipeline"

levels:
  auto_pass:
    description: "Criterios atendidos automaticamente â€” prosseguir"
    action: continue
    color: "ðŸŸ¢"

  review:
    description: "Criterios parcialmente atendidos â€” requer revisao do autor"
    action: pause_for_review
    color: "ðŸŸ¡"

  block:
    description: "Criterios nao atendidos â€” nao pode prosseguir"
    action: block
    color: "ðŸ”´"

gates:
  - id: gate-extract-to-transform
    name: "Extract â†’ Transform"
    file: gate-extract-to-transform.yaml

  - id: gate-revision-loop
    name: "Revision Loop (Editor â†” Critic)"
    file: gate-revision-loop.yaml

  - id: gate-transform-to-load
    name: "Transform â†’ Load"
    file: gate-transform-to-load.yaml

settings:
  require_author_approval: true  # author must approve at review gates
  auto_save_checkpoint: true
  log_gate_results: true
  timeout:
    review_approval: 24h
    block_resolution: 48h
    escalation_action: notify_author
    escalation_message: "Gate pendente ha mais de {timeout}. Requer atencao."

  # Pre-gate validation
  # Valida handoffs antes de processar quality gates
  pre_gate_validation:
    enabled: true
    validate_handoffs: true    # Valida handoff data contra schema
    validate_book_state: true  # Valida book-state sections
    script: "scripts/validate-handoff.js --validate-data"
    on_failure: block          # block | warn | ignore
